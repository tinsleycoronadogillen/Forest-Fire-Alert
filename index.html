<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Early Fire & Smoke Detection â€“ Teachable Machine Model</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f6f6f6;
      color: #222;
    }

    header {
      background: #d84315;
      color: white;
      padding: 20px;
      text-align: center;
    }

    section {
      width: 90%;
      max-width: 900px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    h2 {
      color: #d84315;
    }

    #webcam-container, #label-container {
      margin-top: 20px;
      text-align: center;
    }

    button {
      background: #d84315;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }

    button:hover {
      background: #bf3a10;
    }

    .alert {
      margin-top: 20px;
      padding: 15px;
      font-size: 1.2rem;
      border-radius: 6px;
      display: none;
    }

    .alert-danger {
      background: #ffcccc;
      border: 2px solid #cc0000;
      color: #a30000;
    }

    .alert-warning {
      background: #fff4cc;
      border: 2px solid #e6b800;
      color: #8a6d00;
    }
  </style>

  <!-- Load Teachable Machine libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
</head>

<body>

<header>
  <h1>Early Fire & Smoke Detection</h1>
  <p>A Teachable Machine model designed to detect smoke and flames in fire-prone outdoor areas.</p>
</header>

<section>
  <h2>ðŸš¨ Project Idea</h2>
  <p>
    Forests, parks, and remote outdoor zones are difficult places to install traditional smoke detectors. 
    Cameras, however, can be placed almost anywhere. This project uses a machine-learning model to watch 
    live camera feeds and detect early signs of firesâ€”helping organizations react before a dangerous 
    outbreak grows.
  </p>
</section>

<section>
  <h2>ðŸ§  How the Model Works</h2>
  <p>
    The system uses a <strong>Teachable Machine image classification model</strong> trained to distinguish:
  </p>
  <ul>
    <li>Flames</li>
    <li>Smoke</li>
    <li>Safe/normal scenes</li>
  </ul>
  <p>
    The webcam feed is analyzed frame-by-frame. When the model detects smoke or fire with high confidence, 
    the system can send alerts to notify forest managers or environmental protection teams.
  </p>
</section>

<section>
  <h2>ðŸ“¸ Try It Yourself</h2>
  <p>
    1. Press <strong>Start</strong> to load the model.  
    <br>
    2. Grant webcam access.  
    <br>
    3. Show pictures/videos of smoke or flamesâ€”or real sources (safely!)â€”to test the model.
  </p>

  <!-- Your Teachable Machine Code Block -->
  <div>Teachable Machine Image Model</div>
  <button type="button" onclick="init()">Start</button>
  <div id="webcam-container"></div>
  <div id="label-container"></div>

</section>

<script type="text/javascript">
// ==========================================================
//   YOUR TEACHABLE MACHINE MODEL CODE (inserted as-is)
// ==========================================================

    // the link to your model provided by Teachable Machine export panel
    // If local, keep "./my_model/"
    const URL = "./my_model/";

    let model, webcam, labelContainer, maxPredictions;

    // Load the image model and set up the webcam
    async function init() {
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";

        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();

        const flip = true; 
        webcam = new tmImage.Webcam(200, 200, flip); 
        await webcam.setup();
        await webcam.play();
        window.requestAnimationFrame(loop);

        document.getElementById("webcam-container").appendChild(webcam.canvas);
        labelContainer = document.getElementById("label-container");
        labelContainer.innerHTML = "";
        for (let i = 0; i < maxPredictions; i++) {
            labelContainer.appendChild(document.createElement("div"));
        }
    }

    async function loop() {
        webcam.update();
        await predict();
        window.requestAnimationFrame(loop);
    }

    async function predict() {
        const prediction = await model.predict(webcam.canvas);
        for (let i = 0; i < maxPredictions; i++) {
            const classPrediction =
                prediction[i].className + ": " + prediction[i].probability.toFixed(2);
            labelContainer.childNodes[i].innerHTML = classPrediction;
        }
    }
// ==========================================================
</script>

</body>
</html>
